---
import "../styles/global.css";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

import { ClientRouter } from "astro:transitions";

interface Props {
    title: string;
    description?: string;
}

const {
    title,
    description = "Steve R Gibson - Professional Resume and Portfolio",
} = Astro.props;
---

<!doctype html>
<html lang="en" class="scroll-smooth dark">
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content={description} />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/png" href="/SteveRGibsonlogo.png" />
        <meta name="generator" content={Astro.generator} />
        
        <!-- Open Graph / LinkedIn -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content={Astro.url} />
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:image" content="https://stevergibson.com/images/stevergibsoncareer.jpg" />

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content={Astro.url} />
        <meta property="twitter:title" content={title} />
        <meta property="twitter:description" content={description} />
        <meta property="twitter:image" content="https://stevergibson.com/images/stevergibsoncareer.jpg" />

        <link rel="canonical" href={new URL(Astro.url.pathname, Astro.site)} />

        <title>{title}</title>
        <!-- Google tag (gtag.js) -->
        <!-- Google tag (gtag.js) -->
        <script type="text/partytown" async src="https://www.googletagmanager.com/gtag/js?id=G-22JL77H4DR"></script>
        <script type="text/partytown">
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());

            gtag("config", "G-22JL77H4DR");
        </script>
        <ClientRouter />
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "Person",
                "name": "Steve R Gibson",
                "jobTitle": "Marketing Director",
                "url": "https://stevergibson.com",
                "sameAs": ["https://www.linkedin.com/in/stevergibson/"],
                "description": "Marketing Director with 15+ years leading integrated, cross-functional, multi-channel growth for national brands.",
                "knowsAbout": ["Paid Search", "Programmatic Advertising", "Google Ads", "GA4", "Marketing Strategy", "AI in Marketing"],
                "alumniOf": [
                    {
                        "@type": "Organization",
                        "name": "Fullman Firm"
                    },
                    {
                        "@type": "Organization",
                        "name": "Canvas Worldwide"
                    }
                ],
                "worksFor": {
                    "@type": "Organization",
                    "name": "Open to Work"
                }
        </script>
    </head>
    <body
        class="bg-white dark:bg-slate-950 text-slate-800 dark:text-slate-200 min-h-screen flex flex-col font-sans antialiased"
    >
        <Header />
        <main class="flex-grow w-full max-w-5xl mx-auto px-4 sm:px-8 py-8">
            <slot />
        </main>
        <Footer />
        <script>
            // Scroll Reveal Observer
            const revealObserver = new IntersectionObserver(
                (entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add("visible");
                            revealObserver.unobserve(entry.target);
                        }
                    });
                },
                { threshold: 0.1 },
            );

            // Observe all elements with .reveal class
            // Use MutationObserver to handle client-side navigation updates if needed,
            // or re-run on astro:page-load
            document.addEventListener("astro:page-load", () => {
                document.querySelectorAll(".reveal").forEach((el) => {
                    revealObserver.observe(el);
                });
            });
        </script>
        <style is:global>
            .reveal {
                opacity: 0;
                transform: translateY(20px);
                transition:
                    opacity 0.8s ease-out,
                    transform 0.8s ease-out;
            }
            .reveal.visible {
                opacity: 1;
                transform: translateY(0);
            }
        </style>
    </body>
</html>
